<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registrarse</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=menu" />
  <link rel="stylesheet" href="../css/registro.css" />
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>

  <!-- Reutilizar header (navegación) -->
<header class="header">
  <div class="header-container">
    <div class="logo">
      <img src="../img/logo.webp" alt="Logo del despacho" class="logo-img">
    </div>

    <nav class="menu-principal">
      <ul>
        <li><a href="../index.html">Inicio</a></li>
        <li><a href="nosotros.html">Nosotros</a></li>
        <li><a href="servicios.html">Servicios</a></li>
        <li><a href="iniciar_sesion.html">Iniciar Sesión</a></li>
      </ul>
    </nav>

    <nav class="menu-hamburguesa">
      <button id="menuToggle">
        <span class="material-symbols-outlined">menu</span>
      </button>
      <ul id="menuOpciones" class="menu-oculto">
        <li><a href="../index.html">Inicio</a></li>
        <li><a href="nosotros.html">Nosotros</a></li>
        <li><a href="servicios.html">Servicios</a></li>
        <li><a href="iniciar_sesion.html">Iniciar Sesión</a></li>
      </ul>
    </nav>
  </div>
</header>

  <main class="registro-container">
    <section class="formulario">
      <h1>REGISTRATE</h1>
      <p>Tipo de Cliente</p>
      <div class="radio-group" id="tipoClienteGrupo">
  <label><input type="radio" name="tipo" value="persona" id="tipoPersona"> Persona</label>
  <label><input type="radio" name="tipo" value="apoderado" id="tipoApoderado"> Apoderado del Menor</label>
  <label><input type="radio" name="tipo" value="empresa" id="tipoEmpresa"> Empresa</label>
</div>

      <form id="registroForm">
  <input type="text" id="nombre" placeholder="Nombre" required>
  <input type="text" id="apellido" placeholder="Apellido">
  <input type="email" id="correo" placeholder="Correo" required>
  <input type="password" id="contrasena" placeholder="Contraseña" required>
  <input type="text" id="direccion" placeholder="Dirección" required>
  <input type="tel" id="telefono" placeholder="Teléfono" required>
  <button type="submit">Registrarse</button>
</form>
<div id="mensajeExito" style="display: none; margin-top: 20px; color: green;">
  ¡Se registró con éxito! <a href="iniciar_sesion.html">Iniciar sesión</a>
</div>
    </section>

    <section class="imagen">
      <img src="../img/CuestionarioRegistrarse.webp" alt="Registro">
    </section>
  </main>

  <section class="oficinas">
    <div>
      <h4>Nuestras Oficinas</h4>
      <p>Encuentra nuestras oficinas ahora en 2 ciudades y no dudes en visitarnos</p>
    </div>
    <div>
      <h4>Nuevo Chimbote</h4>
      <p>Contry<br>Plaza de Armas<br>Ovalo la Familia</p>
    </div>
    <div>
      <h4>San Jacinto</h4>
      <p>Pin Pon Alto<br>San Francisco<br>San Martin</p>
    </div>
  </section>

  <section class="contacto">
  <div class="contacto-container">
    <div class="contacto-texto">
      <h2>¿Tienes dudas o deseas comunicarte directamente?</h2>
      <p><strong>Correo:</strong> consultorio@utp.edu.pe</p>
      <p><strong>Teléfono:</strong> (01) 123-4567</p>
      <p><strong>WhatsApp:</strong> +51 972 154 855</p>
      <p><strong>Dirección:</strong> Av. Panamericana, Nuevo Chimbote, Perú</p>
    </div>
    <div class="contacto-imagen">
      <img src="../img/Contacto.webp" alt="Contacto">
    </div>
  </div>
</section>


<!-- Pie de página -->
<footer class="footer">
  <div class="footer-container">
    <div class="footer-logo">
      <img src="../img/logo.webp" alt="Logo" class="logo-pie-pagina">
    </div>
    <div class="footer-links">
      <a href="../index.html">Inicio</a>
      <a href="nosotros.html">Nosotros</a>
      <a href="servicios.html">Servicios</a>
    </div>
  </div>
</footer>

    <!-- Botón de Subida -->
<button id="btnSubir" title="Subir al inicio">
  <img src="../img/flecha.webp" alt="Subir" />
</button>

<script>
  // Script para el menú hamburguesa
  document.getElementById("menuToggle").addEventListener("click", function () {
    const menu = document.getElementById("menuOpciones");
    menu.classList.toggle("menu-visible");
  });

  // Opcional: cerrar menú al hacer clic fuera de él
  window.addEventListener("click", function (e) {
    const toggle = document.getElementById("menuToggle");
    const menu = document.getElementById("menuOpciones");
    if (!toggle.contains(e.target) && !menu.contains(e.target)) {
      menu.classList.remove("menu-visible");
    }
  });

  // Script para el formulario de registro (manteniendo tu lógica actual)
  const tipoEmpresa = document.getElementById("tipoEmpresa");
  const tipoPersona = document.getElementById("tipoPersona");
  const tipoApoderado = document.getElementById("tipoApoderado");
  const apellidoInput = document.getElementById("apellido");

  // Mostrar/ocultar campo "Apellido" según tipo de cliente
  document.querySelectorAll("input[name='tipo']").forEach(radio => {
    radio.addEventListener("change", () => {
      if (tipoEmpresa.checked) {
        apellidoInput.style.display = "none";
      } else {
        apellidoInput.style.display = "block";
      }
    });
  });

  // Evento al enviar el formulario
  document.getElementById("registroForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const nombre = document.getElementById("nombre").value.trim();
    const apellido = document.getElementById("apellido").value.trim();
    const correo = document.getElementById("correo").value.trim();
    const contrasena = document.getElementById("contrasena").value.trim();
    const direccion = document.getElementById("direccion").value.trim();
    const telefono = document.getElementById("telefono").value.trim();
    const tipoSeleccionado = document.querySelector("input[name='tipo']:checked");

    // Validar selección de tipo de cliente
    if (!tipoSeleccionado) {
      alert("Por favor selecciona un tipo de cliente.");
      return;
    }

    // Validación campos obligatorios
    if (!nombre || (!tipoEmpresa.checked && !apellido) || !correo || !contrasena || !direccion || !telefono) {
      alert("Por favor completa todos los campos obligatorios.");
      return;
    }

    // Crear objeto con todos los datos del usuario
    const nuevoUsuario = {
      nombre: nombre,
      apellido: tipoEmpresa.checked ? "" : apellido,
      correo: correo,
      contrasena: contrasena,
      direccion: direccion,
      telefono: telefono,
      tipo: tipoSeleccionado.value
    };

    // Obtener usuarios existentes
    let listaUsuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    listaUsuarios.push(nuevoUsuario);
    localStorage.setItem("usuarios", JSON.stringify(listaUsuarios));

    // También guardar el último registrado para iniciar sesión
    localStorage.setItem("usuarioRegistrado", JSON.stringify({
      correo: correo,
      contrasena: contrasena
    }));

    // Mostrar mensaje de éxito
    const mensaje = document.getElementById("mensajeExito");
    mensaje.innerHTML = `✅ Se registró con éxito. <a href="iniciar_sesion.html">Haz clic aquí para iniciar sesión</a>`;
    mensaje.style.display = "block";

    // Limpiar formulario
    document.getElementById("registroForm").reset();
    apellidoInput.style.display = "block"; // Asegurar que el campo apellido se muestre si es necesario
  });

  // --- SCRIPT PARA EL BOTÓN SUBIR (AÑADIDO/MODIFICADO) ---
  const btnSubir = document.getElementById("btnSubir");
  const footer = document.querySelector(".footer"); // Seleccionamos el footer
  const scrollThreshold = 200; // Distancia de scroll para mostrar/ocultar el botón

  window.addEventListener("scroll", () => {
    // 1. Mostrar/Ocultar el botón solo si está en la parte superior
    if (document.documentElement.scrollTop > scrollThreshold) {
      btnSubir.style.display = "block";
    } else {
      btnSubir.style.display = "none";
    }

    // 2. Calcular la posición del botón en relación con el footer
    const scrollBottom = document.documentElement.scrollHeight - (window.innerHeight + document.documentElement.scrollTop);

    // Ajusta el margen si el footer es muy pequeño o el botón es grande
    const footerHeightWithMargin = footer.offsetHeight + 30 + 20; // Altura del footer + bottom del botón + margen

    // Si el scrollBottom (distancia del final de la página) es menor que la altura del footer con margen,
    // significa que estamos lo suficientemente cerca del footer como para que el botón lo toque.
    if (scrollBottom < footerHeightWithMargin) {
      // Ajusta la posición del botón para que esté "pegado" al footer
      btnSubir.style.bottom = `${footerHeightWithMargin - scrollBottom}px`;
    } else {
      // Si no estamos cerca del footer, el botón vuelve a su posición `fixed` normal
      btnSubir.style.bottom = "30px";
    }
  });

  btnSubir.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

</body>
</html>
